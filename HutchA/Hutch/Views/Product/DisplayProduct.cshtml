@model Hutch.ViewModels.AllProductsViewModel

@{
    ViewBag.Title = "DisplayProduct";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
@Scripts.Render("~/bundles/modernizr")

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

<link href="~/Content/Styles/Product/AllProducts.css" rel="stylesheet" />
<link href="~/Content/Styles/Shared.css" rel="stylesheet" />
<link href="~/Content/Styles/Reset.css" rel="stylesheet" />

<main class="all-products">

    @if (Model.Products.Count > 0)
    {
        <div class="all-products-conatainer">
            <div class="product-container-header">

                <a href="@Url.Action("Index", "Home")">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="#000000" viewBox="0 0 256 256">
                        <path d="M224,128a8,8,0,0,1-8,8H59.31l58.35,58.34a8,8,0,0,1-11.32,11.32l-72-72a8,8,0,0,1,0-11.32l72-72a8,8,0,0,1,11.32,11.32L59.31,120H216A8,8,0,0,1,224,128Z"></path>
                    </svg>
                    Back
                </a>

                <div class="product-about-container">
                    <div class="product-about">
                        <h4>See it. Love it. Get it.</h4>
                        <p>Explore the diverse spectrum of our product portfolio, designed to meet your every need. From innovative gadgets to essential tools, our collection embodies quality, functionality, and style</p>
                    </div>

                    <div class="product-filter-bar-open-btn">
                        <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="#000000" viewBox="0 0 256 256">
                            <path d="M40,88H73a32,32,0,0,0,62,0h81a8,8,0,0,0,0-16H135a32,32,0,0,0-62,0H40a8,8,0,0,0,0,16Zm64-24A16,16,0,1,1,88,80,16,16,0,0,1,104,64ZM216,168H199a32,32,0,0,0-62,0H40a8,8,0,0,0,0,16h97a32,32,0,0,0,62,0h17a8,8,0,0,0,0-16Zm-48,24a16,16,0,1,1,16-16A16,16,0,0,1,168,192Z"></path>
                        </svg>
                    </div>
                </div>

            </div>

            <aside class="product-filter-bar">
                <div class="filter-header">
                    <h4>Filter</h4>
                    <div class="product-filter-bar-close-btn">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="#000000" viewBox="0 0 256 256">
                            <path d="M221.66,133.66l-72,72a8,8,0,0,1-11.32-11.32L196.69,136H40a8,8,0,0,1,0-16H196.69L138.34,61.66a8,8,0,0,1,11.32-11.32l72,72A8,8,0,0,1,221.66,133.66Z"></path>
                        </svg>
                    </div>
                </div>

                <form class="filter-container" action="@Url.Action("DisplayProduct", "Product")">
                    <label>
                        <input type="checkbox" name="filters" value="Clear" />
                        <span>Clear All</span>
                    </label>

                    <label>
                        <input type="checkbox" name="filters" value="Low" />
                        <span>Price(Low-High)</span>
                    </label>

                    <label>
                        <input type="checkbox" name="filters" value="High" />
                        <span>Price(High-Low)</span>

                    </label>
                    <label>
                        <input type="checkbox" name="filters" value="New" />
                        <span>New Arrival</span>
                    </label>
                    <input type="Submit" value="Submit" />
                </form>

            </aside>

            <div class="product-container-content">

                @foreach (var product in Model.Products)
                {

                    var base64 = Convert.ToBase64String(product.p_image);
                    var imagesrc = string.Format("data: image/gif; base64, {0}", base64);
                    var isWishlisted = Model.WishlistIds.Any(item => item == product.pid);

                    <div class="product-card">
                        <h6>@ViewBag.wishlistMessage</h6>


                        <button class="wishlist-icon-container" data-product-id="@product.pid" type="button">

                            @if (isWishlisted)
                            {
                                <svg class="wishlisted-icon display-block" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="18" height="18" fill="#ff3131">
                                    <path d="M47.6 300.4L228.3 469.1c7.5 7 17.4 10.9 27.7 10.9s20.2-3.9 27.7-10.9L464.4 300.4c30.4-28.3 47.6-68 47.6-109.5v-5.8c0-69.9-50.5-129.5-119.4-141C347 36.5 300.6 51.4 268 84L256 96 244 84c-32.6-32.6-79-47.5-124.6-39.9C50.5 55.6 0 115.2 0 185.1v5.8c0 41.5 17.2 81.2 47.6 109.5z" />
                                </svg>

                                <svg class="wishlist-icon" xmlns="http://www.w3.org/2000/svg" width="19" height="19" fill="#000000" viewBox="0 0 256 256">
                                    <path d="M178,32c-20.65,0-38.73,8.88-50,23.89C116.73,40.88,98.65,32,78,32A62.07,62.07,0,0,0,16,94c0,70,103.79,126.66,108.21,129a8,8,0,0,0,7.58,0C136.21,220.66,240,164,240,94A62.07,62.07,0,0,0,178,32ZM128,206.8C109.74,196.16,32,147.69,32,94A46.06,46.06,0,0,1,78,48c19.45,0,35.78,10.36,42.6,27a8,8,0,0,0,14.8,0c6.82-16.67,23.15-27,42.6-27a46.06,46.06,0,0,1,46,46C224,147.61,146.24,196.15,128,206.8Z"></path>
                                </svg>
                            }
                            else
                            {
                                <svg class="wishlisted-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="18" height="18" fill="#ff3131">
                                    <path d="M47.6 300.4L228.3 469.1c7.5 7 17.4 10.9 27.7 10.9s20.2-3.9 27.7-10.9L464.4 300.4c30.4-28.3 47.6-68 47.6-109.5v-5.8c0-69.9-50.5-129.5-119.4-141C347 36.5 300.6 51.4 268 84L256 96 244 84c-32.6-32.6-79-47.5-124.6-39.9C50.5 55.6 0 115.2 0 185.1v5.8c0 41.5 17.2 81.2 47.6 109.5z" />
                                </svg>

                                <svg class="wishlist-icon display-block" xmlns="http://www.w3.org/2000/svg" width="19" height="19" fill="#000000" viewBox="0 0 256 256">
                                    <path d="M178,32c-20.65,0-38.73,8.88-50,23.89C116.73,40.88,98.65,32,78,32A62.07,62.07,0,0,0,16,94c0,70,103.79,126.66,108.21,129a8,8,0,0,0,7.58,0C136.21,220.66,240,164,240,94A62.07,62.07,0,0,0,178,32ZM128,206.8C109.74,196.16,32,147.69,32,94A46.06,46.06,0,0,1,78,48c19.45,0,35.78,10.36,42.6,27a8,8,0,0,0,14.8,0c6.82-16.67,23.15-27,42.6-27a46.06,46.06,0,0,1,46,46C224,147.61,146.24,196.15,128,206.8Z"></path>
                                </svg>
                            }

                        </button>



                        <a class="product-card-link" href="@Url.Action("Details", "Product", new { pid = product.pid })">
                            <div class="product-image">
                                <img class="product-card-image" src="@imagesrc" alt="@product.p_name" />
                            </div>
                            <div class="product-details">
                                <h5>@product.p_name</h5>
                                <span>&#8377 @product.p_price</span>
                            </div>
                        </a>

                    </div>

                }

            </div>
        </div>
    }

    else
    {
        <div class="no-products-container">

            <img src="~/Content/Assets/Products/EmptyBag.png"/>

            <h6>No products found...</h6>

            <div class="back-home-link">

                <a href="@Url.Action("Index", "Home")">
                
                    <svg xmlns="http://www.w3.org/2000/svg" width="19" height="19" fill="#000000" viewBox="0 0 256 256">
                        <path d="M222,128a6,6,0,0,1-6,6H54.49l61.75,61.76a6,6,0,1,1-8.48,8.48l-72-72a6,6,0,0,1,0-8.48l72-72a6,6,0,0,1,8.48,8.48L54.49,122H216A6,6,0,0,1,222,128Z"></path>
                    </svg>

                    Back to home
                </a>

            </div>
            
        </div>
    }

</main>

@Scripts.Render("~/bundles/Product")
@Scripts.Render("~/bundles/Wishlist")