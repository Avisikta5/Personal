@model IEnumerable<Hutch.Models.Product>

@{
    ViewBag.Title = "ViewAllProduct";
    Layout = "~/Views/Shared/_AdminLayout.cshtml";
}
<link href="~/Content/Styles/Admin/ViewAllProduct.css" rel="stylesheet" />

<main class="admin-all-products-container">

    <div class="all-products">
        @foreach (var product in Model)
        {
            var base64 = Convert.ToBase64String(product.p_image);
            var imagesrc = string.Format("data: image/gif; base64, {0}", base64);
            <div class="product-card">

                <div class="product-card-image">
                    <img src="@imagesrc" alt="@product.p_name" />

                </div>

                <div class="product-details">

                    <div class="product-name">
                        <h6>@product.p_name</h6>

                        <a href="@Url.Action("ViewSingleProduct" , "Admin", new {id = product.pid})">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="#000000" viewBox="0 0 256 256">
                                <path d="M247.31,124.76c-.35-.79-8.82-19.58-27.65-38.41C194.57,61.26,162.88,48,128,48S61.43,61.26,36.34,86.35C17.51,105.18,9,124,8.69,124.76a8,8,0,0,0,0,6.5c.35.79,8.82,19.57,27.65,38.4C61.43,194.74,93.12,208,128,208s66.57-13.26,91.66-38.34c18.83-18.83,27.3-37.61,27.65-38.4A8,8,0,0,0,247.31,124.76ZM128,192c-30.78,0-57.67-11.19-79.93-33.25A133.47,133.47,0,0,1,25,128,133.33,133.33,0,0,1,48.07,97.25C70.33,75.19,97.22,64,128,64s57.67,11.19,79.93,33.25A133.46,133.46,0,0,1,231.05,128C223.84,141.46,192.43,192,128,192Zm0-112a48,48,0,1,0,48,48A48.05,48.05,0,0,0,128,80Zm0,80a32,32,0,1,1,32-32A32,32,0,0,1,128,160Z"></path>
                            </svg>
                        </a>
                    </div>

                    @if (product.p_desc.Length > 183)
                    {
                        <p>
                            @product.p_desc.Substring(0, 181)...
                        </p>
                    }
                    else
                    {
                        <p>
                            @product.p_desc
                        </p>
                    }

                <span>&#8377 @product.p_price</span>

                    @if (product.p_qty <= 0)
                    {
                        <span class="product-additional-text">Out of stock</span>
                    }
                    else if (product.p_qty < 5)
                    {
                        <span class="product-additional-text">Few items left</span>
                    }

                    @if (product.p_arrival != null && product.p_arrival.ToLower() == "top")
                    {
                        <span class="product-trending-text">Top selling</span>
                    }
                    else if (product.p_arrival != null && product.p_arrival.ToLower() == "new")
                    {
                        <span class="product-trending-text">New arrival</span>
                    }

                </div>
                
            </div>
        }
    </div>
</main>
